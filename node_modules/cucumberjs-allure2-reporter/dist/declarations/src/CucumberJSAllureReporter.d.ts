/// <reference types="node" />
import { Formatter, World as CucumberWorld } from "cucumber";
import { AllureGroup, AllureInterface, AllureRuntime, AllureStep, AllureTest, ContentType, ExecutableItemWrapper, GlobalInfoWriter } from "allure2-js-commons";
import { Result } from "./events/Result";
import { SourceLocation } from "./events/SourceLocation";
import { GherkinDocument } from "./events/GherkinDocument";
export { AllureInterface } from "allure2-js-commons";
export interface World extends CucumberWorld {
    allure: AllureInterface;
}
export declare class CucumberJSAllureFormatterConfig {
    labels?: {
        [key: string]: RegExp[];
    };
    exceptionFormatter?: (message: string) => string;
}
export declare class CucumberJSAllureFormatter extends Formatter {
    private readonly allureRuntime;
    private readonly sourceMap;
    private readonly stepsMap;
    private readonly featureMap;
    private readonly labels;
    private readonly exceptionFormatter;
    private readonly beforeHooks;
    private readonly afterHooks;
    private stepStack;
    currentGroup: AllureGroup | null;
    currentTest: AllureTest | null;
    currentBefore: ExecutableItemWrapper | null;
    currentAfter: ExecutableItemWrapper | null;
    readonly allureInterface: AllureInterface;
    constructor(options: any, allureRuntime: AllureRuntime, config: CucumberJSAllureFormatterConfig);
    onSource(data: {
        uri: string;
        data: string;
        media: {
            encoding: string;
            type: string;
        };
    }): void;
    onGherkinDocument(data: {
        uri: string;
        document: GherkinDocument;
    }): void;
    onTestCasePrepared(data: {
        steps: SourceLocation[];
    } & SourceLocation): void;
    onTestCaseStarted(data: SourceLocation): void;
    onTestStepStarted(data: {
        index: number;
        testCase: SourceLocation;
    }): void;
    onTestStepAttachment(data: {
        index: number;
        data: string;
        media: {
            type: string;
        };
        testCase: SourceLocation;
    }): void;
    onTestStepFinished(data: {
        index: number;
        result: Result;
        testCase: SourceLocation;
    }): void;
    onTestCaseFinished(data: {
        result: Result;
    } & SourceLocation): void;
    private setException;
    pushStep(step: AllureStep): void;
    popStep(): void;
    readonly currentStep: AllureStep | null;
    writeAttachment(content: Buffer | string, type: ContentType): string;
    getGlobalInfoWriter(): GlobalInfoWriter;
}
